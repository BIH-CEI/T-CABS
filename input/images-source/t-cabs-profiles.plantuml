@startuml T-CABS Profile Relationships & Examples
!theme plain
skinparam backgroundColor white
skinparam class {
    BackgroundColor<<General>> LightBlue
    BackgroundColor<<Ventilation>> LightGreen
    BackgroundColor<<VitalData>> LightYellow
    BackgroundColor<<Device>> LightCoral
    BackgroundColor<<Abstract>> LightGray
    BackgroundColor<<Example>> Lavender
    BorderColor Black
}

' Main structure from top to bottom
top to bottom direction

' Top Level - General Profiles
package "Allgemein (General)" {
    class T_CABS_Patient <<General>> {
        +Base: MIIPatient
        +ID: t-cabs-patient
        +Example: tcabs-patient-example
    }
    
    class T_CABS_Encounter_Kontakt <<General>> {
        +Base: MIIEncounter
        +ID: t-cabs-encounter-kontakt
        +Example: Example-Encounter-Telemedizinische-Visite
    }
    
    class T_CABS_DiagnosticReport_Visitenbefund <<General>> {
        +Base: DiagnosticReport
        +ID: t-cabs-diagnosticreport-visitenbefund
        +Example: Example-DiagnosticReport-Woechentliche-Visite
    }
    
    class T_CABS_Practitioner_PersonMitFunktion <<General>> {
        +Base: practitioner
        +ID: t-cabs-practitioner-arzt
        +Example: tcabs-practitioner-example
    }
    
    class T_CABS_Organisation <<General>> {
        +Base: Organization
        +ID: t-cabs-organisation
        +Examples: beispiel-provider-*
    }
    
    ' Study Management
    class T_CABS_Group_Patientengruppe <<General>> {
        +Base: Group
        +ID: t-cabs-group-patientengruppe
    }
    
    class T_CABS_ResearchStudy_Studie <<General>> {
        +Base: ResearchStudy
        +ID: t-cabs-researchstudy-studie
    }
    
    class T_CABS_ResearchSubject_Studienteilnehmer <<General>> {
        +Base: ResearchSubject
        +ID: t-cabs-researchsubject-studienteilnehmer
    }
    
    class T_CABS_PractitionerRole_Rolle <<General>> {
        +Base: PractitionerRole
        +ID: t-cabs-practitionerrole-rolle
    }
}

' Left Side - Ventilation Related Profiles
package "Beatmungsdaten (Ventilation)" {
    ' Ventilation Device Hierarchy
    package "Ventilation Device Hierarchy" {
        class T_CABS_Device_MDS_Beatmungsgeraet <<Device>> {
            +Base: MdsDevice
            +ID: t-cabs-device-mds-beatmungsgeraet
            +Examples: beispiel-beatmungsgeraet-*
        }
        
        class T_CABS_Device_VMD_Beatmungsgeraet <<Device>> {
            +Base: VmdDevice
            +ID: t-cabs-device-vmd-beatmungsgeraet
        }
        
        class T_CABS_Device_Channel_Beatmungsgeraet <<Device>> {
            +Base: ChannelDevice
            +ID: t-cabs-device-channel-beatmungsgeraet
        }
        
        class T_CABS_DeviceMetric_NumericMetric <<Device>> {
            +Base: NumericDeviceMetric
            +ID: t-cabs-devicemetric-numericmetric
        }
    }

    ' Ventilation Procedure
    class T_CABS_Procedure_Beatmung <<Ventilation>> {
        +Base: MII Procedure
        +ID: t-cabs-procedure-beatmung
        +Examples: beispiel-beatmung-*
    }

    ' Updated Ventilation Parameter Observations
    package "Ventilation Parameter Observations" {
        class T_CABS_Observation_Beatmungsparameter <<Abstract>> {
            +Base: NumericObservation
            +ID: t-cabs-observation-beatmungsparameter
            +{abstract}
        }
        
        class T_CABS_Observation_AHI <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-ahi
            +Example: Example-AHI-BREAS
        }
        
        class T_CABS_Observation_AMV <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-amv
            +Examples: Example-AMV-*-gemessen
        }
        
        class T_CABS_Observation_Atemfrequenz_beatmet <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-atemfrequenz-beatmet
            +Examples: Example-Atemfrequenz-*-gemessen
        }
        
        class T_CABS_Observation_Leckage <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-leckage
            +Examples: Example-Leckage-*
        }
        
        class T_CABS_Observation_Synchronisation <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-synchronisation
            +Examples: Example-Synchronisation-*
        }
        
        class T_CABS_Observation_TriggeredBreaths <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-triggeredbreaths
            +Examples: Example-TriggeredBreaths-*
        }
        
        class T_CABS_Observation_TI <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-ti
            +Example: Example-TI-Loewenstein
        }
        
        class T_CABS_Observation_Atemzeitverhaeltnis <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-atemzeitverhaeltnis
            +Example: Example-Atemzeitverhaeltnis-ResMed
        }
        
        class T_CABS_Observation_DruckMinMax <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-druck-minmax
            +Example: Example-DruckMinMax-ResMed
        }
        
        class T_CABS_Observation_IPAP <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-ipap
            +Example: Example-IPAP-BREAS
        }
        
        class T_CABS_Observation_TargetVolume <<Ventilation>> {
            +Parent: T_CABS_Observation_Beatmungsparameter
            +ID: t-cabs-observation-targetvolume
            +Example: Example-TargetVolume-BREAS
        }
    }
}

' Right Side - Vital Data Profiles
package "Vitaldaten (Vital Data) - Doccla" {
    ' Vital Data Device Profiles
    package "Vital Data Devices" {
        class T_CABS_Device_PHD <<Device>> {
            +Base: PhdDevice
            +ID: t-cabs-device-phd
            +Example: beispiel-phd-doccla
        }
        
        class T_CABS_Device_PHG <<Device>> {
            +Base: PhgDevice
            +ID: t-cabs-device-phg
            +Example: beispiel-phg-doccla
        }
    }

    ' Vital Data Observations with Code Slices
    package "Vital Data Observations" {
        class T_CABS_Observation_Vitalparameter <<Abstract>> {
            +Base: PhdNumericObservation
            +ID: t-cabs-observation-vitalparameter
            +{abstract}
        }
        
        class T_CABS_Observation_ArterielleSPO2 <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-arteriellespo2
            +Example: Example-ArterielleSPO2-Doccla
        }
        
        class T_CABS_Observation_ArteriellerBlutdruck <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-arteriellerblutdruck
            +Example: Example-ArteriellerBlutdruck-Doccla
        }
        
        class T_CABS_Observation_Atemfrequenz <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-atemfrequenz
            +Example: Example-Atemfrequenz-Doccla
        }
        
        class T_CABS_Observation_BMI <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-bmi
            +Example: Example-BMI-Doccla
        }
        
        class T_CABS_Observation_FEV1 <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observationfev1
            +Example: Example-FEV1-Doccla
        }
        
        class T_CABS_Observation_Gehstrecke <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-gehstrecke
            +Example: Example-Gehstrecke-Doccla
        }
        
        class T_CABS_Observation_Herzfrequenz <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-herzfrequenz
            +Example: Example-Herzfrequenz-Doccla
        }
        
        class T_CABS_Observation_Koerpergewicht <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-koerpergewicht
            +Example: Example-Koerpergewicht-Doccla
        }
        
        class T_CABS_Observation_Koerpertemperatur <<VitalData>> {
            +Parent: t-cabs-observation-vitalparameter
            +ID: t-cabs-observation-koerpertemperatur
            +Example: Example-Koerpertemperatur-Doccla
        }
    }
}

' === CLINICAL WORKFLOW RELATIONSHIPS ===

' Core Clinical Workflow - Telemedical Visit
T_CABS_Patient ||--o{ T_CABS_Encounter_Kontakt : subject
T_CABS_Encounter_Kontakt ||--|| T_CABS_DiagnosticReport_Visitenbefund : encounter
T_CABS_DiagnosticReport_Visitenbefund }o--|| T_CABS_Patient : subject
T_CABS_DiagnosticReport_Visitenbefund }o--o{ T_CABS_Observation_Beatmungsparameter : result
T_CABS_DiagnosticReport_Visitenbefund }o--o{ T_CABS_Observation_Vitalparameter : result

' Staff and Organization
T_CABS_Encounter_Kontakt }o--|| T_CABS_Practitioner_PersonMitFunktion : participant
T_CABS_Encounter_Kontakt }o--|| T_CABS_Organisation : serviceProvider
T_CABS_DiagnosticReport_Visitenbefund }o--|| T_CABS_Practitioner_PersonMitFunktion : performer

' Research Study Relationships
T_CABS_ResearchStudy_Studie ||--o{ T_CABS_Group_Patientengruppe : enrollment
T_CABS_ResearchStudy_Studie }o--|| T_CABS_Practitioner_PersonMitFunktion : principalInvestigator
T_CABS_ResearchSubject_Studienteilnehmer }o--|| T_CABS_ResearchStudy_Studie : study
T_CABS_ResearchSubject_Studienteilnehmer }o--|| T_CABS_Patient : individual

' Group Management
T_CABS_Group_Patientengruppe }o--|| T_CABS_Practitioner_PersonMitFunktion : managingEntity
T_CABS_Group_Patientengruppe }o--|| T_CABS_Organisation : managingEntity

' === DEVICE AND PROCEDURE RELATIONSHIPS ===

' Ventilation Therapy
T_CABS_Procedure_Beatmung }o--|| T_CABS_Patient : subject
T_CABS_Procedure_Beatmung }o--|| T_CABS_Device_MDS_Beatmungsgeraet : usedReference
T_CABS_Encounter_Kontakt }o--o{ T_CABS_Procedure_Beatmung : reasonReference

' Device-Patient Relationships
T_CABS_Device_MDS_Beatmungsgeraet }o--|| T_CABS_Patient : patient
T_CABS_Device_PHD }o--|| T_CABS_Patient : patient
T_CABS_Device_PHG }o--|| T_CABS_Patient : patient

' Device Hierarchy (Ventilation)
T_CABS_Device_VMD_Beatmungsgeraet }o--|| T_CABS_Device_MDS_Beatmungsgeraet : parent
T_CABS_Device_Channel_Beatmungsgeraet }o--|| T_CABS_Device_VMD_Beatmungsgeraet : parent
T_CABS_DeviceMetric_NumericMetric }o--|| T_CABS_Device_Channel_Beatmungsgeraet : parent

' === OBSERVATION RELATIONSHIPS ===

' Observation Device References
T_CABS_Observation_Vitalparameter }o--|| T_CABS_Device_PHD : device
T_CABS_Observation_Vitalparameter }o--|| T_CABS_Device_PHG : gatewayDevice
T_CABS_Observation_Beatmungsparameter }o--|| T_CABS_DeviceMetric_NumericMetric : device

' Observation Subject References
T_CABS_Observation_Vitalparameter }o--|| T_CABS_Patient : subject
T_CABS_Observation_Beatmungsparameter }o--|| T_CABS_Patient : subject

' Procedure References (Ventilation Observations)
T_CABS_Observation_Beatmungsparameter }o--|| T_CABS_Procedure_Beatmung : partOf

' === INHERITANCE RELATIONSHIPS ===

' Ventilation Parameter Inheritance (Updated Parent)
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_AHI
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_AMV
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_Atemfrequenz_beatmet
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_Leckage
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_Synchronisation
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_TriggeredBreaths
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_TI
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_Atemzeitverhaeltnis
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_DruckMinMax
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_IPAP
T_CABS_Observation_Beatmungsparameter <|-- T_CABS_Observation_TargetVolume

' Vital Parameter Inheritance (with Code Slices)
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_ArterielleSPO2
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_ArteriellerBlutdruck
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_Atemfrequenz
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_BMI
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_FEV1
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_Gehstrecke
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_Herzfrequenz
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_Koerpergewicht
T_CABS_Observation_Vitalparameter <|-- T_CABS_Observation_Koerpertemperatur

@enduml